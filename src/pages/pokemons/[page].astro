---
import type { GetStaticPaths } from "astro";
import Layout from "../../layout/layout.astro";
import type { PokemonList } from "../../interfaces/pokemon-list.interface";
import PokemonCard from "../../components/pokemon/PokemonCard.astro";

export const getStaticPaths = (async ({ paginate }) => {
  const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=150");
  const { results } = (await res.json()) as PokemonList;

  return paginate(results, { pageSize: 10 });
}) satisfies GetStaticPaths;

const title = "Pokemon Static | Home";

const { page } = Astro.props;
---

<Layout title={title}>
  <section class="hero p-10">
    <div class="hero-content text-center">
      <div class="max-w-xxl flex flex-col gap-10">
        <h1 class="mb-4 text-3xl font-extrabold md:text-5xl lg:text-6xl">
          <span
            class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400"
            >Astro framework</span
          > exploration with Pokémon API Integration
        </h1>
        <p
          class="text-lg font-normal text-gray-500 lg:text-xl dark:text-gray-400 text-center"
        >
          This project involves learning about the Astro framework while
          integrating data from a Pokémon API. By exploring Astro's capabilities
          in building web applications, alongside extracting and displaying
          Pokémon data dynamically, this endeavor aims to blend technical skill
          development with thematic creativity.
        </p>
        <div
          class="flex justify-center mt-10 animate-fade-down animate-infinite animate-duration-[2500ms]"
        >
          <svg
            class="w-[70px]"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
              <path
                d="M5 15C5 16.8565 5.73754 18.6371 7.05029 19.9498C8.36305 21.2626 10.1435 21.9999 12 21.9999C13.8565 21.9999 15.637 21.2626 16.9498 19.9498C18.2625 18.6371 19 16.8565 19 15V9C19 7.14348 18.2625 5.36305 16.9498 4.05029C15.637 2.73754 13.8565 2 12 2C10.1435 2 8.36305 2.73754 7.05029 4.05029C5.73754 5.36305 5 7.14348 5 9V15Z"
                stroke="#000000"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
              <path
                d="M12 6V14"
                stroke="#000000"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
              <path
                d="M15 11L12 14L9 11"
                stroke="#000000"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </g></svg
          >
        </div>
      </div>
    </div>
  </section>
  <section
    class="flex flex-col items-center justify-center mt-[200px] bg-base-300 p-10 rounded-3xl mx-8 my-4 shadow-2xl"
  >
    <h2
      class="mb-10 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white"
    >
      List of pokemons
    </h2>
    <ul class="grid grid-cols-1 sm:grid-cols-5 md:grid-cols-5 gap-4">
      {
        page.data.map((pokemon) => (
          <PokemonCard name={pokemon.name} url={pokemon.url} />
        ))
      }
    </ul>


    <div class="flex px-10 mt-10 gap-2 items-center justify-center">
      <div class="join">


        <a href={page.url.prev} class:list={["join-item btn", {disabled: !page.url.prev} ]}>« Anterior</a>
        <button class="join-item btn">Page {page.currentPage}</button>
        <a href={page.url.next} class:list={["join-item btn", {disabled: !page.url.next} ]}>Siguiente »</a>
      </div>
    </div>


     
  </section>
</Layout>

<style>
  .disabled {
    @apply bg-gray-400 text-gray-500;
  }
</style>
